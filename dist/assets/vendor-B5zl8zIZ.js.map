{"version":3,"file":"vendor-B5zl8zIZ.js","sources":["../../src/jsx-runtime.ts"],"sourcesContent":["import { resetHooks, runEffects } from \"./hooks\";\n\nexport interface VNode {\n  type: string | ComponentFunction;\n  props: Record<string, any>;\n  children: (VNode | string | number)[];\n}\n\ninterface ComponentProps {\n  children?: (VNode | string | number)[];\n  [key: string]: any;\n}\n\ntype ComponentFunction = (props: ComponentProps) => VNode | string | number;\n\nlet currentRoot: HTMLElement | null = null;\nlet currentVNode: VNode | null = null;\nlet hookStates: any[] = [];\nlet hookIndex = 0;\n\nexport function createElement(\n  type: string | ComponentFunction,\n  props: Record<string, any> | null,\n  ...children: (VNode | string | number | boolean | null | undefined)[]\n): VNode {\n  const flatChildren = children\n    .flat()\n    .filter((c): c is VNode | string | number => c != null && c !== false);\n  const safeProps = props ? { ...props } : {};\n  (safeProps as ComponentProps).children = flatChildren;\n  return { type, props: safeProps, children: flatChildren };\n}\n\nexport function createFragment(\n  props: Record<string, any> | null,\n  ...children: (VNode | string | number)[]\n): VNode {\n  return createElement(\"fragment\", props, ...children);\n}\n\nfunction setProp(el: HTMLElement, key: string, value: any) {\n  if (value == null || value === false) return;\n  \n  // Feature 1: Refs Support - Handle both object refs and callback refs\n  if (key === \"ref\") {\n    if (typeof value === \"function\") {\n      // Callback ref - call function with the element\n      value(el);\n    } else if (typeof value === \"object\" && \"current\" in value) {\n      // Object ref - set current property\n      value.current = el;\n    }\n    return;\n  }\n\n  // Event handling\n  if (key.startsWith(\"on\") && typeof value === \"function\") {\n    const eventName = key.slice(2).toLowerCase();\n    el.addEventListener(eventName, value as EventListener);\n    return;\n  }\n\n  // className handling\n  if (key === \"className\") {\n    el.setAttribute(\"class\", String(value));\n    return;\n  }\n\n  // Feature 2: CSS-in-JS Support - Handle both string and object styles\n  if (key === \"style\") {\n    if (typeof value === \"string\") {\n      // String style: \"color: red; font-size: 14px\"\n      el.setAttribute(\"style\", value);\n    } else if (typeof value === \"object\") {\n      // Object style: {color: 'red', fontSize: '14px'}\n      // Convert camelCase to kebab-case (backgroundColor â†’ background-color)\n      const css = Object.entries(value)\n        .map(([k, v]) => {\n          const kebabCase = k.replace(/[A-Z]/g, (m) => \"-\" + m.toLowerCase());\n          return `${kebabCase}:${v}`;\n        })\n        .join(\";\");\n      el.setAttribute(\"style\", css);\n    }\n    return;\n  }\n\n  // Default: set as attribute\n  el.setAttribute(key, String(value));\n}\n\nexport function renderToDOM(vnode: VNode | string | number | null | undefined): Node {\n  // Handle null/undefined - return empty text node\n  if (vnode == null) {\n    return document.createTextNode(\"\");\n  }\n\n  if (typeof vnode === \"string\" || typeof vnode === \"number\") {\n    return document.createTextNode(String(vnode));\n  }\n\n  if (typeof vnode.type === \"function\") {\n    const out = (vnode.type as ComponentFunction)(vnode.props);\n    return renderToDOM(out);\n  }\n\n  if (vnode.type === \"fragment\") {\n    const frag = document.createDocumentFragment();\n    vnode.children.forEach((child) => frag.appendChild(renderToDOM(child)));\n    return frag;\n  }\n\n  const el = document.createElement(vnode.type);\n  for (const [k, v] of Object.entries(vnode.props || {})) setProp(el, k, v);\n  vnode.children.forEach((child) => el.appendChild(renderToDOM(child)));\n  return el;\n}\n\nexport function mount(vnode: VNode, container: HTMLElement) {\n  currentRoot = container;\n  currentVNode = vnode;\n  hookIndex = 0;\n  container.innerHTML = \"\";\n  container.appendChild(renderToDOM(vnode));\n\n  setTimeout(() => {\n    requestAnimationFrame(() => {\n      runEffects();\n    });\n  }, 0);\n}\n\nfunction rerender() {\n  if (!currentRoot || !currentVNode) return;\n  hookIndex = 0;\n  currentRoot.innerHTML = \"\";\n  currentRoot.appendChild(renderToDOM(currentVNode));\n\n  setTimeout(() => {\n    requestAnimationFrame(() => {\n      runEffects();\n    });\n  }, 0);\n}\n\nexport function useState<T>(initialValue: T): [() => T, (v: T) => void] {\n  const idx = hookIndex;\n\n  if (hookStates[idx] === undefined) {\n    hookStates[idx] = initialValue; \n  }\n\n  const get = () => hookStates[idx];\n\n  const set = (v: T) => {\n    hookStates[idx] = v;\n    requestAnimationFrame(rerender);\n  };\n\n  hookIndex++;\n  return [get, set];\n}\n"],"names":["currentRoot","currentVNode","hookStates","hookIndex","createElement","type","props","children","flatChildren","c","safeProps","setProp","el","key","value","eventName","css","k","v","renderToDOM","vnode","out","frag","child","mount","container","runEffects","rerender","useState","initialValue","idx","get","set"],"mappings":"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"}